<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bookmarked Products</title>
    <link rel="stylesheet" href="styleBookmark.css">
</head>
<body>

    <div class="sidebar">
        <button class="all" data-category="all" onclick="filterProducts('all')">All</button>
        <button class="devices" data-category="kitchen-electronics" onclick="filterProducts('kitchen-electronics')">Kitchen Electronics</button>
        <button class="devices" data-category="television" onclick="filterProducts('television')">Television</button>
        <button class="devices" data-category="air-conditioner" onclick="filterProducts('air-conditioner')">Air Conditioner</button>
        <button class="devices" data-category="fridge-freezer" onclick="filterProducts('fridge-freezer')">Fridge & Freezer</button>
        <button class="devices" data-category="home-electronics" onclick="filterProducts('home-electronics')">Home Electronics</button>
        <button class="devices" data-category="washing-machine" onclick="filterProducts('washing-machine')">Washing Machine</button>
        <button class="devices" data-category="gadget-accessories" onclick="filterProducts('gadget-accessories')">Gadget Accessories</button>
    </div>

    <div class="sidebar-select">
        <select id="sidebar-menu" onchange="filterProducts(this.value)">
            <option value="all">All</option>
            <option value="kitchen-electronics">Kitchen Electronics</option>
            <option value="television">Television</option>
            <option value="air-conditioner">Air Conditioner</option>
            <option value="fridge-freezer">Fridge & Freezer</option>
            <option value="home-electronics">Home Electronics</option>
            <option value="washing-machine">Washing Machine</option>
            <option value="gadget-accessories">Gadget Accessories</option>
        </select>
    </div>

    <div id="bookmark-list" class="product-grid">
        
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
    const bookmarks = JSON.parse(localStorage.getItem("bookmarks")) || [];
    const bookmarkList = document.getElementById("bookmark-list");

    if (bookmarks.length === 0) {
        bookmarkList.innerHTML = "<p>No bookmarks yet.</p>";
    } else {
        bookmarkList.innerHTML = ""; // Clear the list before populating it

        bookmarks.forEach(bookmark => {
            const productCard = document.createElement("div");
            productCard.classList.add("product-card");
            productCard.setAttribute('data-category', bookmark.category); // Set data-category
            productCard.innerHTML = `
                <div class="border-book">
                    <img src="bookmark fill.png" class="book-pic" onclick="removeBookmark('${bookmark.id}')">
                </div>
                <div class="border-pict">
                    <img src="${bookmark.image}" alt="${bookmark.name}">
                </div>
                <h3>${bookmark.name}</h3>
                <p>Capacity: ${bookmark.capacity}</p>
                <p>Category: ${bookmark.category}</p> <!-- Display category -->
            `;
            bookmarkList.appendChild(productCard);
        });
    }
});

function removeBookmark(productId) {
    let bookmarks = JSON.parse(localStorage.getItem("bookmarks")) || [];
    bookmarks = bookmarks.filter(bookmark => bookmark.id !== productId);
    localStorage.setItem("bookmarks", JSON.stringify(bookmarks));
    updateBookmarkList();
    // Trigger storage event manually
    window.dispatchEvent(new Event('storage'));
}

function updateBookmarkList() {
    const bookmarks = JSON.parse(localStorage.getItem("bookmarks")) || [];
    const bookmarkList = document.getElementById("bookmark-list");

    if (bookmarks.length === 0) {
        bookmarkList.innerHTML = "<p>No bookmarks yet.</p>";
    } else {
        bookmarkList.innerHTML = ""; // Clear the list before populating it

        bookmarks.forEach(bookmark => {
            const productCard = document.createElement("div");
            productCard.classList.add("product-card");
            productCard.setAttribute('data-category', bookmark.category); // Set data-category
            productCard.innerHTML = `
                <div class="border-book">
                    <img src="bookmark fill.png" class="book-pic" onclick="removeBookmark('${bookmark.id}')">
                </div>
                <div class="border-pict">
                    <img src="${bookmark.image}" alt="${bookmark.name}">
                </div>
                <h3>${bookmark.name}</h3>
                <p>Capacity: ${bookmark.capacity}</p>
                <p>Category: ${bookmark.category}</p> <!-- Display category -->
            `;
            bookmarkList.appendChild(productCard);
        });
    }
}

document.getElementById("hapus-semua-bookmark").addEventListener("click", function() {
    // Menghapus data bookmark dari localStorage
    localStorage.removeItem("bookmarks");
    // Mengupdate tampilan, misalnya dengan menghapus semua produk yang telah ditampilkan
    document.getElementById("bookmark-list").innerHTML = "<p>No bookmarks yet.</p>";
    // Trigger storage event manually
    window.dispatchEvent(new Event('storage'));
});

window.addEventListener('storage', updateBookmarkList);


        function filterProducts(category) {
    var productCards = document.querySelectorAll('.product-card');
    var buttons = document.querySelectorAll('.sidebar button');

    // Tampilkan atau sembunyikan produk berdasarkan kategori
    productCards.forEach(function(card) {
        if (category === 'all') {
            card.style.display = 'block';
        } else if (card.getAttribute('data-category') === category) {
            card.style.display = 'block';
        } else {
            card.style.display = 'none';
        }
    });

    // Tambahkan atau hapus kelas 'active' pada tombol yang diklik
    buttons.forEach(function(button) {
        if (button.getAttribute('data-category') === category) {
            button.classList.add('active');
        } else {
            button.classList.remove('active');
        }
    });
}

function toggleBookmark(imgElement) {
    const filledBookmarkSrc = 'bookmark fill.png';  // Path to the filled bookmark image
    const emptyBookmarkSrc = 'bookmark.png';         // Path to the original bookmark image

    if (imgElement.src.includes(emptyBookmarkSrc)) {
        imgElement.src = filledBookmarkSrc;
        imgElement.classList.add('filled');
    } else {
        imgElement.src = emptyBookmarkSrc;
        imgElement.classList.remove('filled');
    }
}
    </script>
</body>
</html>
